(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{194:function(t,e,n){var content=n(204);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(36).default)("2e283be0",content,!0,{sourceMap:!1})},195:function(t,e,n){var content=n(206);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(36).default)("3b59b9d1",content,!0,{sourceMap:!1})},196:function(t,e,n){var content=n(210);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(36).default)("7065d1d7",content,!0,{sourceMap:!1})},198:function(t,e,n){"use strict";var o={props:{loading:Boolean,disabled:Boolean,type:{type:String,default:"default"}},methods:{handleClick:function(t){this.$emit("click",t)}}},c=(n(209),n(12)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"cbtn-base",class:[t.type?"cbtn-"+t.type:"cbtn-default"],attrs:{disabled:t.disabled||t.loading},on:{click:t.handleClick}},[t.loading?n("i",{staticClass:"btn-loading"}):t._e(),t._v(" "),n("span",[t._t("default")],2)])}),[],!1,null,null,null);e.a=component.exports},203:function(t,e,n){"use strict";var o=n(194);n.n(o).a},204:function(t,e,n){(e=n(35)(!1)).push([t.i,".video-con{position:relative;text-align:center;margin:0 auto}.video-con,.video-con>img{width:100%;height:100%}.video-con .video-modal{position:absolute;left:0;right:0;top:0;bottom:0;display:flex;justify-content:center;align-items:center;z-index:9;background-repeat:no-repeat;background-size:100%}.video-con .video-action-icon{display:inline-block;width:40px;height:40px;cursor:pointer;z-index:10}.video-con .video-style{width:100%;height:100%;display:block;background-color:#000}",""]),t.exports=e},205:function(t,e,n){"use strict";var o=n(195);n.n(o).a},206:function(t,e,n){(e=n(35)(!1)).push([t.i,".like-comment[data-v-628950c7]{display:flex;justify-content:space-between}.like-comment>li>i[data-v-628950c7]{width:18px;height:18px;background-size:18px 18px;background-repeat:no-repeat;cursor:pointer}.like-comment>li>i[data-v-628950c7],.like-comment>li>span[data-v-628950c7]{display:inline-block;vertical-align:middle}.like-comment>li>span[data-v-628950c7]{font-size:13px;color:#888;padding-left:6px}.like-comment>li .active-color[data-v-628950c7]{color:#03ad8f}",""]),t.exports=e},207:function(t,e,n){var content=n(231);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(36).default)("1c0124c3",content,!0,{sourceMap:!1})},208:function(t,e,n){var content=n(233);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(36).default)("51737d54",content,!0,{sourceMap:!1})},209:function(t,e,n){"use strict";var o=n(196);n.n(o).a},210:function(t,e,n){(e=n(35)(!1)).push([t.i,".cbtn-default{background-color:transparent}.cbtn-base{height:44px;outline:none}.btn-loading{padding-left:24px;background:url(//o3pvuu23u.qnssl.com/candy/images/loading-min.gif) no-repeat;background-size:20px 20px;background-position:0}",""]),t.exports=e},211:function(t,e,n){var content=n(235);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(36).default)("87142658",content,!0,{sourceMap:!1})},212:function(t,e,n){var content=n(237);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(36).default)("10890341",content,!0,{sourceMap:!1})},218:function(t,e,n){"use strict";n(197);var o={data:function(){return{playing:!1,showBtn:!0}},props:{width:Number,mediaItem:Object,picHost:String},computed:{cover:function(){return this.mediaItem&&this.picHost+this.mediaItem.coverUrl},vedioUrl:function(){return this.mediaItem&&this.picHost+this.mediaItem.url},height:function(){if(this.width){var t=this.mediaItem&&parseInt(this.mediaItem.height/this.mediaItem.width*this.width);return t+"px"}return"100%"}},mounted:function(){},methods:{playAction:function(){this.oVideo=this.$refs.videoRef,console.log(this.oVideo,this.oVideo.width),this.oVideo.play(),this.playing=!0,this.showBtn=!1}}},c=(n(203),n(12)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"videoCon",staticClass:"video-con",on:{click:function(t){t.stopPropagation()}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showBtn,expression:"showBtn"}],staticClass:"video-modal",style:{backgroundImage:"url("+t.cover+")"},on:{click:function(e){return e.stopPropagation(),t.playAction(e)}}},[n("i",{staticClass:"video-action-icon",class:[t.playing?"pause":"play"]})]),t._v(" "),n("video",{ref:"videoRef",staticClass:"video-style",style:{height:t.height},attrs:{src:t.vedioUrl,playsinline:"","webkit-playsinline":"",controls:"",loop:"",preload:"auto",controlsList:"nodownload"}})])}),[],!1,null,null,null);e.a=component.exports},219:function(t,e,n){"use strict";n(48),n(23),n(24),n(9),n(37);var o=n(22),c=(n(197),n(90)),r=n(19),l=n(17);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{tribeId:{type:Number},detail:{type:Object,default:{downed:!0,upped:!1}},newsId:{type:String},updateData:{type:Function},commentNew:{type:Function},isList:Boolean},data:function(){return{userId:"",token:""}},mounted:function(){this.token=r.default.getCookie("utoken"),this.userId=r.default.getCookie("_user_id")},components:{},methods:d(d({},Object(l.c)(["setNeedLogin"])),{},{needLoginAction:function(){return!this.token&&(this.setNeedLogin(!0),!0)},zanAction:function(){var t=this;if(!this.needLoginAction()){var data={news_id:this.detail.id,user_id:this.userId};c.a.get({url:"/news/up_tribe_news",data:data,done:function(e){e.code&&(t.detail.upped?(t.detail.upped=!1,t.detail.upCount-=1):!t.detail.upped&&t.detail.downed?(t.detail.upCount+=1,t.detail.downCount-=1,t.detail.upped=!0,t.detail.downed=!1):(t.detail.upped=!0,t.detail.upCount+=1))},fail:function(t){console.log(t)}})}},caiAction:function(){var t=this;if(!this.needLoginAction()){var data={news_id:this.detail.id,user_id:this.userId};c.a.get({url:"/news/down_tribe_news",data:data,done:function(e){e.code&&(t.detail.downed?(t.detail.downed=!1,t.detail.downCount-=1):!t.detail.downed&&t.detail.upped?(t.detail.downed=!0,t.detail.downCount+=1,t.detail.upCount-=1,t.detail.upped=!1):(t.detail.downed=!0,t.detail.downCount+=1))},fail:function(){Indicator.close()}})}}})},h=(n(205),n(12)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"like-comment-content"},[n("ul",{staticClass:"like-comment"},[n("li",{on:{click:function(e){return e.stopPropagation(),t.caiAction(e)}}},[n("i",{class:[t.detail.downed?"cai-active-icon":"cai-png"]}),t._v(" "),n("span",[t._v(t._s(t.detail.downCount))])]),t._v(" "),n("li",{on:{click:function(e){return e.stopPropagation(),t.zanAction(e)}}},[n("i",{class:[t.detail.upped?"zan-active-icon":"zan-png"]}),t._v(" "),n("span",{class:{"active-color":t.detail.upped}},[t._v(t._s(t.detail.upCount))])]),t._v(" "),n("li",[n("i",{staticClass:"comment-png"}),t._v(" "),n("span",[t._v(t._s(t.detail.commentCount))])])])])}),[],!1,null,"628950c7",null);e.a=component.exports},230:function(t,e,n){"use strict";var o=n(207);n.n(o).a},231:function(t,e,n){(e=n(35)(!1)).push([t.i,".tribe-detail-con[data-v-03f3c813]{width:100%}.tribe-detail-con .detail-con-inner .head[data-v-03f3c813]{position:absolute;left:0;right:0;padding-bottom:15px;padding-left:15px;padding-top:15px}.tribe-detail-con .detail-con-inner .head>img[data-v-03f3c813]{width:40px;height:40px;border-radius:50%}.tribe-detail-con .detail-con-inner .head .name[data-v-03f3c813]{color:#333;font-weight:700;margin-left:10px}.tribe-detail-con .detail-con-inner .scroll-comment-con[data-v-03f3c813]{position:absolute;top:70px;left:0;right:0;bottom:60px;overflow:hidden;overflow-y:scroll}.tribe-detail-con .detail-con-inner .scroll-comment-con[data-v-03f3c813]::-webkit-scrollbar{display:none}.tribe-detail-con .detail-con-inner .detail-content[data-v-03f3c813]{margin-left:50px;padding-right:30px;border-bottom:1px solid #e6e6e6}.tribe-detail-con .detail-con-inner .detail-content>pre[data-v-03f3c813]{margin:0}.tribe-detail-con .detail-con-inner .detail-content .info[data-v-03f3c813]{font-size:14px}.tribe-detail-con .detail-con-inner .detail-content .tribe-zan[data-v-03f3c813]{padding:16px 48px}",""]),t.exports=e},232:function(t,e,n){"use strict";var o=n(208);n.n(o).a},233:function(t,e,n){(e=n(35)(!1)).push([t.i,".comment-item[data-v-e597f154]{padding:15px 0 0 15px}.comment-item .comment-inner .head-con[data-v-e597f154]{overflow:hidden;padding-left:40px;padding-right:120px}.comment-item .comment-inner .head-con>img[data-v-e597f154]{position:relative;float:left;width:40px;height:40px;left:-40px;border-radius:50%;margin-left:-100%}.comment-item .comment-inner .head-con .name-time[data-v-e597f154]{position:relative;float:left;width:100%;padding-left:10px}.comment-item .comment-inner .head-con .name-time .name[data-v-e597f154]{font-size:14px;color:#4c7fe5}.comment-item .comment-inner .head-con .name-time .time[data-v-e597f154]{color:#999;font-size:12px;margin-top:4px}.comment-item .comment-inner .head-con .zan-comment[data-v-e597f154]{position:relative;float:left;width:90px;margin-left:-120px;right:-120px;display:flex;height:40px;align-items:center;color:#666;font-size:12px}.comment-item .comment-inner .head-con .zan-comment .reply-btn[data-v-e597f154]{padding-right:10px;cursor:pointer}.comment-item .comment-inner .head-con .zan-comment .line[data-v-e597f154]{color:#e6e6e6}.comment-item .comment-inner .head-con .zan-comment .zan-s[data-v-e597f154]{margin-left:10px;margin-right:8px;display:inline-block;width:18px;height:18px;vertical-align:middle;background-size:14px 14px;background-repeat:no-repeat;background-position:50%;cursor:pointer}.comment-item .comment-inner .zan-png[data-v-e597f154]{background-image:url(//o3pvuu23u.qnssl.com/candy/images/zan.png)}.comment-item .comment-inner .zan-active-icon[data-v-e597f154]{background-image:url(//o3pvuu23u.qnssl.com/candy/images/zan-green.png)}.comment-item .comment-inner .comment-info[data-v-e597f154]{margin-left:50px;padding-top:10px;padding-right:30px;padding-bottom:15px;border-bottom:1px solid #e6e6e6}.comment-item .comment-inner .comment-info .sub-comment[data-v-e597f154]{background-color:#f8f8f8;padding:0 10px 10px;margin-top:10px}.comment-item .comment-inner .comment-info .sub-comment .sub-comment-list[data-v-e597f154]{padding-top:10px;font-size:12px}.comment-item .comment-inner .comment-info .sub-comment .sub-content .name[data-v-e597f154]{word-break:break-word}.comment-item .comment-inner .comment-info .sub-comment .sub-content .blue-text[data-v-e597f154]{color:#4c7fe5}.comment-item .comment-inner .comment-info .sub-comment .sub-content .detail-text[data-v-e597f154]{word-break:break-word}.comment-item .comment-inner .comment-info .sub-comment .comment-count[data-v-e597f154]{display:inline-block;color:#4c7fe5;font-size:12px;margin-top:10px;cursor:pointer}",""]),t.exports=e},234:function(t,e,n){"use strict";var o=n(211);n.n(o).a},235:function(t,e,n){(e=n(35)(!1)).push([t.i,".detail-comment-con[data-v-6e00f0f6]{position:absolute;top:0;bottom:0;right:0;left:0}.detail-comment-con.sub-bg[data-v-6e00f0f6]{background-color:#f8f8f8}.detail-comment-con .comment-list-con[data-v-6e00f0f6]{position:absolute}.detail-comment-con .comment-input[data-v-6e00f0f6]{position:absolute;bottom:0;left:0;right:0;height:58px;border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;background-color:#fff;z-index:20;overflow:hidden}.detail-comment-con .comment-input .input-con[data-v-6e00f0f6]{position:relative;width:84%;float:left}.detail-comment-con .comment-input .input-con>input[data-v-6e00f0f6]{padding-left:15px;height:58px;width:100%}.detail-comment-con .comment-input .input-con .cancel-input[data-v-6e00f0f6]{padding-right:60px}.detail-comment-con .comment-input .input-con .cancel-text[data-v-6e00f0f6]{position:absolute;color:#999;font-size:14px;top:18px;right:0;cursor:pointer}.detail-comment-con .comment-input .btn-send[data-v-6e00f0f6]{float:right;color:#03ad8f;width:14%;margin-top:7px}.detail-comment-con .load-con[data-v-6e00f0f6]{height:100px;display:flex;align-items:center;justify-content:center;color:#999;font-size:14px}.detail-comment-con .load-con>span[data-v-6e00f0f6]{cursor:pointer}",""]),t.exports=e},236:function(t,e,n){"use strict";var o=n(212);n.n(o).a},237:function(t,e,n){(e=n(35)(!1)).push([t.i,".detail-con{min-width:1200px}.detail-con .detail-inner{position:relative;max-width:1200px;min-height:82vh;margin:0 auto;background-color:#fff}.detail-con .detail-inner .po-left{position:absolute;left:0;width:700px;height:100%;background-color:#000}.detail-con .detail-inner .po-left .video-po{width:100%;height:100%;text-align:center}.detail-con .detail-inner .po-right{position:absolute;right:0;width:500px;height:100%}",""]),t.exports=e},249:function(t,e,n){"use strict";n.r(e);var o=n(220),c=n.n(o),r=n(90),l=n(19),m=n(218),d=(n(48),n(23),n(24),n(9),n(37),n(22)),f=(n(197),n(219)),h={data:function(){return{}},props:{detail:{type:Object,default:{}}},components:{likeComment:f.a},mounted:function(){},methods:{}},v=(n(230),n(12)),x=Object(v.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tribe-detail-con"},[n("div",{staticClass:"detail-con-inner"},[n("div",{staticClass:"head"},[n("img",{attrs:{src:t.detail.portraitUrl&&t.detail.portraitUrl.indexOf("http")>-1?t.detail.portraitUrl:t.detail.picHost+t.detail.portraitUrl+"?imageView2/1/w/64/h/64",alt:""}}),t._v(" "),n("span",{staticClass:"name"},[t._v(t._s(t.detail.userName))])]),t._v(" "),n("div",{staticClass:"scroll-comment-con"},[n("div",{staticClass:"detail-content"},[n("pre",{staticClass:"info"},[t._v(t._s(t.detail.content))]),t._v(" "),n("div",{staticClass:"tribe-zan"},[n("like-comment",{attrs:{detail:t.detail}})],1)]),t._v(" "),t._t("default")],2)])])}),[],!1,null,"03f3c813",null).exports,C=(n(92),n(72),{data:function(){return{userId:""}},props:{item:Object,replyComment:Function},computed:{formateDate:function(){return function(t,e){if(!t||!e)return"";if("string"!=typeof t&&"number"!=typeof t||(t=new Date(t)),isNaN(t))return"";var n={"M+":t.getMonth()+1,"D+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"Q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var o in/(Y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return e}(new Date(this.item.createTime-288e5),"MM月DD日 hh:mm")}},mounted:function(){this.userId=l.default.getCookie("_user_id")},methods:{zanCommentAction:function(){var t=this;this.userId&&r.a.get({url:"/news/up_news_comment",data:{comment_id:this.item.id,user_id:this.userId},done:function(e){e.code&&(0===t.item.upped?(t.item.upped=1,t.item.upCount+=1):(t.item.upped=0,t.item.upCount-=1))},fail:function(t){console.log(t)}})},replyAction:function(){this.replyComment(this.item)},showSubComment:function(){this.$emit("subCommentShow",this.item.id)}}}),_=(n(232),Object(v.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-item"},[n("div",{staticClass:"comment-inner"},[n("div",{staticClass:"head-con"},[n("div",{staticClass:"name-time"},[n("p",{staticClass:"name"},[t._v(t._s(t.item.userName))]),t._v(" "),n("p",{staticClass:"time"},[t._v(t._s(t.formateDate))])]),t._v(" "),n("img",{attrs:{src:t.item.avatar+"?imageView2/1/w/64/h/64",alt:""}}),t._v(" "),n("ul",{staticClass:"zan-comment"},[n("li",{on:{click:t.replyAction}},[n("span",{staticClass:"reply-btn"},[t._v("回复")])]),t._v(" "),t._m(0),t._v(" "),n("li",[n("i",{staticClass:"zan-s",class:[t.item.upped?"zan-active-icon":"zan-png"],on:{click:t.zanCommentAction}}),n("span",[t._v(t._s(t.item.upCount))])])])]),t._v(" "),n("div",{staticClass:"comment-info"},[n("pre",{staticClass:"comment-text"},[-1!==t.item.atUserId?n("span",[t._v("回复 "+t._s(t.item.atUserName)+":")]):t._e(),t._v(" "+t._s(t.item.content))]),t._v(" "),t.item&&t.item.subCommentList?n("div",{staticClass:"sub-comment"},[t._l(t.item.subCommentList,(function(e){return n("div",{key:e.id,staticClass:"sub-comment-list"},[n("div",{staticClass:"active-content sub-content"},[n("p",{staticClass:"name detail-text"},[n("span",{staticClass:"blue-text"},[t._v(t._s(e.userName))]),t._v(":\n              "),t._v(" "),1===e.status?n("span",{staticClass:"detail-text del-text"},[t._v("原评论已删除")]):n("span",{ref:"text-html",refInFor:!0,staticClass:"detail-text"},[t._v(t._s(e.content))])])])])})),t._v(" "),t.item.subCommentCount>2?n("span",{staticClass:"comment-count",on:{click:t.showSubComment}},[t._v("共"+t._s(t.item&&t.item.subCommentCount)+"条回复>")]):t._e()],2):t._e()])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("span",{staticClass:"line"},[this._v("|")])])}],!1,null,"e597f154",null).exports),w=n(198),y=n(17);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(d.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var L={data:function(){return{token:"",inputPlaceholder:"",commentText:"",isReply:!1,currentReplyId:"",showSubComment:!1,sending:!1,commentLists:[],tribe_userid:"",subComments:[],commentCon:{},newsId:"",offset:0,subcommentEmpty:!1,isAtReply:!1,atReplyUserId:"",currentSubCommentId:"",commentLoadText:"",subCommentLoadText:"",commentLoadAll:!1,subCommentLoadAll:!1}},props:{limit:Number,initComment:Array,activeDetail:Object},components:{tribeDetail:x,comment:_,baseBtn:w.a},mounted:function(){this.newsId=this.$route.params.id,this.commentLists=[].concat(this.initComment),this.tribe_userid=l.default.getCookie("_user_id"),this.token=l.default.getCookie("utoken"),this.commentLoadState(this.initComment)},methods:O(O({},Object(y.c)(["setNeedLogin"])),{},{cancelReply:function(){this.isAtReply=!1,this.isReply=!1,this.inputPlaceholder="",this.commentText=""},onReplySubComment:function(t){this.isAtReply=!1,this.currentReplyId=t.id},onReplyAtComment:function(t){this.inputPlaceholder="回复"+t.userName,this.isAtReply=!0,this.$refs.inputF.focus(),this.atReplyUserId=t.userId},onSubCommentShow:function(t){t?(this.subComments=[],this.$refs.inputF.focus(),this.currentReplyId=t,this.getSubComment(),this.showSubComment=!0):(this.currentReplyId="",this.showSubComment=!1)},onReplyComment:function(t){this.inputPlaceholder="回复"+t.userName,this.$refs.inputF.focus(),this.isReply=!0,this.currentReplyId=t.id},sendComment:function(){if(this.token){if(this.commentText){this.commentText=this.filterText(this.commentText);var data={news_id:this.activeDetail.id,user_id:+this.tribe_userid,comment:this.commentText};this.sending||((this.isReply||this.showSubComment)&&(data=Object.assign(data,{comment_id:this.currentReplyId})),this.isAtReply&&(data.at_user_id=this.atReplyUserId),this.commentAction(data))}}else this.setNeedLogin(!0)},commentAction:function(data,t){var e=this;this.sending=!0,r.a.get({url:"/news/comment_tribe_news",data:data,done:function(t){if(e.sending=!1,t.code)e.updateCommentData(),console.log("更新成功");else{var n=t.err.message;e.$toast({message:n,type:"error"})}},fail:function(){}})},filterText:function(text){return c()(text,{whiteList:[],stripIgnoreTag:!0,stripIgnoreTagBody:["script"]})},updateCommentData:function(){this.commentText="",this.showSubComment?(this.subComments=[],this.getSubComment()):(this.commentLists=[],this.getCommentList())},loadMoreComment:function(){this.commentLoadAll||this.getCommentList()},getCommentList:function(){var t=this,data={news_id:this.newsId,offset:this.commentLists.length,limit:this.limit,type:1};this.tribe_userid&&(data.user_id=this.tribe_userid),r.a.get({url:"/news/get_news_comment",data:data,done:function(e){e.err||(t.commentLists=t.commentLists.concat(e.data.list),t.commentLoadState(e.data.list))}})},commentLoadState:function(data){data.length<this.limit?(this.commentLoadAll=!0,this.commentLoadText=0===this.commentLists.length?"暂无评论":"已加载全部评论"):this.commentLoadText="点击加载更多"},loadMoreSubComment:function(){this.subCommentLoadAll||this.getSubComment()},getSubComment:function(){var t=this,data={news_id:this.newsId,comment_id:this.currentReplyId,offset:this.subComments.length,limit:this.limit};this.userId&&(data.user_id=this.userId),r.a.get({url:"/news/get_sub_comment",data:data,done:function(e){e.err||(0===t.subComments.length&&0===e.data.subList.length?t.subcommentEmpty=!0:t.subcommentEmpty=!1,t.subComments=t.subComments.concat(e.data.subList),t.commentCon.id||(t.commentCon=e.data.comment),e.data.subList.length<t.limit?(t.subCommentLoadText="已加载完全部评论",t.subCommentLoadAll=!1):t.subCommentLoadText="点击加载更多")},fail:function(t){console.log(t)}})}})},I=(n(234),Object(v.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"detail-comment-con",class:{"sub-bg":t.showSubComment}},[n("tribe-detail",{attrs:{detail:t.activeDetail}},[t._l(t.commentLists,(function(e){return n("comment",{key:e.id,attrs:{item:e,"reply-comment":t.onReplyComment},on:{subCommentShow:t.onSubCommentShow}})})),t._v(" "),n("div",{staticClass:"load-con"},[n("span",{on:{click:t.loadMoreComment}},[t._v(t._s(t.commentLoadText))])])],2),t._v(" "),n("div",{staticClass:"comment-input"},[n("div",{staticClass:"input-con"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.commentText,expression:"commentText"}],ref:"inputF",class:{"cancel-input":t.isReply},attrs:{placeholder:t.inputPlaceholder||"添加评论"},domProps:{value:t.commentText},on:{input:function(e){e.target.composing||(t.commentText=e.target.value)}}}),t._v(" "),t.isReply||t.isAtReply?n("span",{staticClass:"cancel-text",on:{click:t.cancelReply}},[t._v("取消回复")]):t._e()]),t._v(" "),n("base-btn",{staticClass:"btn-send",attrs:{loading:t.sending},on:{click:t.sendComment}},[t._v("发送")])],1)],1)}),[],!1,null,"6e00f0f6",null).exports),j={data:function(){return{activeDetail:{},commentList:[]}},asyncData:function(t){var e=r.a.getSsrContextCookie(t)._user_id;return r.a.all({requests:[{method:"get",url:"/xsd",data:{news_id:t.params.id},context:t},{method:"get",url:"/sdfw",data:{news_id:t.params.id,user_id:e},context:t}],done:function(t,e){return{activeDetail:t.data&&t.data.data.list[0],commentList:e.data&&e.data.data.list}}})},components:{videoCom:m.a,detailComment:I},computed:{mediaItem:function(){return this.activeDetail.imagesList&&this.activeDetail.imagesList[0]}},mounted:function(){},methods:{}},z=(n(236),Object(v.a)(j,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"detail-con"},[e("div",{staticClass:"detail-inner"},[e("div",{staticClass:"po-left"},[e("video-com",{staticClass:"video-po",attrs:{"media-item":this.mediaItem,"pic-host":this.activeDetail.picHost}})],1),this._v(" "),e("div",{staticClass:"po-right"},[e("detail-comment",{attrs:{limit:30,"active-detail":this.activeDetail,"init-comment":this.commentList}})],1)])])}),[],!1,null,null,null));e.default=z.exports}}]);